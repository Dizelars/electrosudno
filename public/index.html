<!DOCTYPE html>
<html lang="ru" class="smooth">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
  <title>Причал</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <script>
    AFRAME.registerComponent("hotspots", {
      init: function () {
        this.el.addEventListener("reloadspots", function (evt) {
          //get the entire current spot group and scale it to 0
          var currspotgroup = document.getElementById(evt.detail.currspots);
          currspotgroup.setAttribute("scale", "0 0 0");

          //get the entire new spot group and scale it to 1
          var newspotgroup = document.getElementById(evt.detail.newspots);
          newspotgroup.setAttribute("scale", "1 1 1");
        });
      }
    });

    AFRAME.registerComponent("spot", {
      schema: {
        linkto: { type: "string", default: "" },
        spotgroup: { type: "string", default: "" },
        phiStart: { type: "string", default: "" }
      },
      init: function () {
        //add image source of hotspot icon
        // this.el.setAttribute("src", "#hotspot");
        //make the icon look at the camera all the time
        // this.el.setAttribute("look-at", "#cam");

        this.el.addEventListener("click", () => {
          var cam = document.getElementById("cam");
          cam.emit("zoomin");

          var fp = document.getElementById("camfadeplane");
          fp.setAttribute("width", "2");
          fp.setAttribute("height", "2");
          fp.emit("camFadeIn");

          //alert("Start zoom");

          const reloadSpot = () => {
            //set the skybox source to the new image as per the spot
            var sky = document.getElementById("skybox");
            sky.setAttribute("src", this.data.linkto);
            //надобавлял говна но оно не пашет
            sky.setAttribute("phi-start", this.data.phiStart);

            var spotcomp = document.getElementById("spots");
            var currspots = this.el.parentElement.getAttribute("id");
            //create event for spots component to change the spots data
            spotcomp.emit("reloadspots", {
              newspots: this.data.spotgroup,
              currspots: currspots
            });

            //this.setAttribute("camera","fov",80);
            cam.emit("zoomout");

            var fp = document.getElementById("camfadeplane");
            fp.emit("camFadeOut");

            setTimeout(() => {
              fp.setAttribute("width", "0");
              fp.setAttribute("height", "0");
            }, 1000);
          };
          setTimeout(reloadSpot, 2000);
        });

        // this.el.addEventListener("mouseleave", function () {
        //   var cur = document.getElementById("cursor-visual");
        //   cur.emit("stopFuse");
        // });

        //поменял mouseenter на click. какая то хуйня
        // this.el.addEventListener("click", function (evt) {
        //   var cur = document.getElementById("cursor-visual");
        //   cur.emit("startFuse");
        // });
      }
    });
  </script>
  <script>
    AFRAME.registerComponent("hotspotsSinich", {
      init: function () {
        this.el.addEventListener("reloadspots", function (evt) {
          //get the entire current spot group and scale it to 0
          var currspotgroup = document.getElementById(evt.detail.currspots);
          currspotgroup.setAttribute("scale", "0 0 0");

          //get the entire new spot group and scale it to 1
          var newspotgroup = document.getElementById(evt.detail.newspots);
          newspotgroup.setAttribute("scale", "1 1 1");
        });
      }
    });

    AFRAME.registerComponent("spotSinich", {
      schema: {
        linkto: { type: "string", default: "" },
        spotgroup: { type: "string", default: "" },
        phiStart: { type: "string", default: "" }
      },
      init: function () {
        //add image source of hotspot icon
        // this.el.setAttribute("src", "#hotspot");
        //make the icon look at the camera all the time
        // this.el.setAttribute("look-at", "#cam");

        this.el.addEventListener("click", () => {
          var cam = document.getElementById("camSinich");
          cam.emit("zoomin");

          var fp = document.getElementById("camfadeplaneSinich");
          fp.setAttribute("width", "2");
          fp.setAttribute("height", "2");
          fp.emit("camFadeIn");

          //alert("Start zoom");

          const reloadSpot = () => {
            //set the skybox source to the new image as per the spot
            var sky = document.getElementById("skyboxSinich");
            sky.setAttribute("src", this.data.linkto);
            //надобавлял говна но оно не пашет
            sky.setAttribute("phi-start", this.data.phiStart);

            var spotcomp = document.getElementById("spotsSinich");
            var currspots = this.el.parentElement.getAttribute("id");
            //create event for spots component to change the spots data
            spotcomp.emit("reloadspots", {
              newspots: this.data.spotgroup,
              currspots: currspots
            });

            //this.setAttribute("camera","fov",80);
            cam.emit("zoomout");

            var fp = document.getElementById("camfadeplaneSinich");
            fp.emit("camFadeOut");

            setTimeout(() => {
              fp.setAttribute("width", "0");
              fp.setAttribute("height", "0");
            }, 1000);
          };
          setTimeout(reloadSpot, 2000);
        });

        // this.el.addEventListener("mouseleave", function () {
        //   var cur = document.getElementById("cursor-visual");
        //   cur.emit("stopFuse");
        // });

        //поменял mouseenter на click. какая то хуйня
        // this.el.addEventListener("click", function (evt) {
        //   var cur = document.getElementById("cursor-visual");
        //   cur.emit("startFuse");
        // });
      }
    });
  </script>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>

  <div id="main" class="bord">

    <div id="hellopreloader">
      <div id="hellopreloader_preload">
        <p id="welcome-text">Готовимся к открытию</p>
      </div>
    </div>

    <div class="video_content">
      <!--      https://assets.codepen.io/39255/output_960.mp4-->
      <!--      src="%PUBLIC_URL%/1video.mp4"-->

      <video playsinline preload muted class="video-background"></video>

      <!--      <video src="%PUBLIC_URL%/2video.mp4" playsinline preload muted class="video-background"></video>-->

      <!--      <video src="%PUBLIC_URL%/3video.mp4" playsinline preload muted class="video-background"></video>-->

      <!--      <video class="bg-video js-number-block active" autoplay muted loop data-number="1">-->
      <!--      </video>-->

      <!--      <video class="bg-video js-number-block" autoplay muted data-number="2" data-transit>-->
      <!--      </video>-->

      <!--      <video class="bg-video js-number-block" autoplay muted loop-->
      <!--             data-number="3"-->
      <!--             data-info-src="%PUBLIC_URL%/images/icons/snow.svg"-->
      <!--             data-info-text="Возможность использования"-->
      <!--             data-info-title="Круглый год">-->
      <!--      </video>-->

      <!--      <video class="bg-video js-number-block" autoplay muted data-transit-->
      <!--             data-number="4"-->
      <!--             data-info-src="%PUBLIC_URL%/images/icons/ejection.svg"-->
      <!--             data-info-text="Выброс вредных веществ"-->
      <!--             data-info-title="0%">-->
      <!--      </video>-->

      <!--      <video class="bg-video js-number-block" autoplay muted data-transit-->
      <!--             data-number="5"-->
      <!--             data-info-src="%PUBLIC_URL%/images/icons/capacity.svg"-->
      <!--             data-info-text="Вместимость"-->
      <!--             data-info-title="50 комфортных мест">-->
      <!--      </video>-->

      <!--      <video class="bg-video js-number-block" autoplay muted data-transit-->
      <!--             data-number="6"-->
      <!--             data-info-src="%PUBLIC_URL%/images/icons/moorings.svg"-->
      <!--             data-info-text="Колличество причалов"-->
      <!--             data-info-title="23 штуки">-->
      <!--      </video>-->

      <div class="mouse_prev">
        <div class="mouse_prev-wrapper">
          <div class="mouse_prev_arrow">
            <img src="%PUBLIC_URL%/images/icons/mouse_arrow.svg" alt="arrow">
          </div>
          <div class="mouse_prev_dot"></div>
        </div>
      </div>

      <div class="leave_button">
        <button>Причалить</button>
        <img class="leave_button-img" src="%PUBLIC_URL%/images/icons/leave_button_arrow.svg" alt="Причалить">
      </div>

      <div class="info_block js-number-block">
        <!--        <div class="card">-->
        <!--        </div>-->
      </div>
    </div>

    <div class="site_content js-number-block">
<!--      data-number="4"-->
<!--      class="js-number-block"-->
      <section id="pier-description" class="bg-grey fixed">
        <div class="container grid-12 col-gap-10 pt-100 pb-100 d-flex-col-tab gap10-tab">
          <div class="col-6">
            <div class="grid-12-rows row-gap-10 col-gap-10 d-flex-col-mob gap10-mob">
              <div class="col-6 row-6">
                <div class="card card-sm bg-grey-grad sepia-grey-grad">
                  <h3 class="text-uppercase">Комфортная зона<br>ожидания</h3>
                  <p class="card-body">Защита от&nbsp;солнца и&nbsp;ветра, а&nbsp;также комфортные диваны. Что может быть лучше?</p>
                  <img class="card-img card-bottom-img img-responsive" src="%PUBLIC_URL%/images/sofa.png" alt="sofa">
                </div>
              </div>
              <div class="col-6 row-6">
                <div class="card card-sm bg-grey-grad sepia-grey-grad">
                  <h3 class="text-uppercase">Кофе-<br>машина</h3>
                  <p>Скрасить ожидание посадки вам поможет ароматная чашечка кофе</p>
                  <img class="card-img card-bottom-img img-responsive" src="%PUBLIC_URL%/images/coffee.png" alt="coffee">
                </div>
              </div>
              <div class="col-6 row-6">
                <div class="card card-sm bg-grey-grad sepia-grey-grad">
                  <h3 class="text-uppercase">Оплата картой<br>«Тройка»</h3>
                  <p>Билет на&nbsp;транспорт всегда с&nbsp;вами. Но&nbsp;кассы на&nbsp;месте тоже работают</p>
                  <img class="card-img card-bottom-img img-responsive" src="%PUBLIC_URL%/images/troyka.png" alt="troyka">
                </div>
              </div>
              <div class="col-6 row-6">
                <div class="card card-sm bg-grey-grad sepia-grey-grad">
                  <h3 class="text-uppercase">Комната матери<br>и&nbsp;ребенка</h3>
                  <p>Для мамочек с самыми юными пассажиров здесь предусмотрена специальная комната</p>
                  <img class="card-img card-bottom-img img-responsive" src="%PUBLIC_URL%/images/bathroom.png" alt="bathroom">
                </div>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="card card-large bg-pier card-aframe">
              <div class="card-content bg-grey-grad05">
                <h3 class="text-uppercase">Посетите виртуальную экскурсию по причалу</h3>
                <p class="mb-50-tab">Рассмотрите все удобства собственными глазами на примере причала на станции Киевская</p>
                <a href="#" class="vue_button btn btn-link sepia-black">
                  <img class="rotation-icon" src="%PUBLIC_URL%/images/icons/360.svg" alt="360">
                  Осмотреть
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="sinichka_fixed video_active" id="sinichka-section">
<!--        autoplay-->
        <video class="section-video" playsinline preload muted>
          <source
            src="/doors.mp4"
            type="video/mp4"/>
        </video>

        <div class="vectary">
          <iframe src="https://app.vectary.com/p/6YGTFqmzg1ssFGNU2tCHY1" width="100%" height="100%"></iframe>
          <div class="tech_speck">
            <div class="tech_speck-click">
              <p class="tech_speck-text">Характеристики</p>
              <img class="tech_speck-img" src="%PUBLIC_URL%/images/icons/techarrow.svg" alt="Скрыть/раскрыть">
            </div>
            <div class="tech_speck-1 tech_speck-info">
              <p class="tech_speck-title">Класс судна:</p>
              <p class="tech_speck-text">ледовый</p>
            </div>
            <div class="tech_speck-2 tech_speck-info">
              <p class="tech_speck-title">Скорость движения:</p>
              <p class="tech_speck-text">15 км/ч</p>
            </div>
            <div class="tech_speck-3 tech_speck-info">
              <p class="tech_speck-title">Время автономной работы:</p>
              <p class="tech_speck-text">5 часов</p>
            </div>
            <div class="tech_speck-4 tech_speck-info">
              <p class="tech_speck-title">Вместимость:</p>
              <p class="tech_speck-text">50 человек</p>
            </div>
          </div>
          <button class="interior_button sepia-black">
            <img class="leave_button_img" src="%PUBLIC_URL%/images/icons/360.svg" alt="осмотреть салон">
            осмотреть
          </button>
        </div>
      </section>

      <!-- Секция с двумя маршрутами -->
      <section id="pier-routes" class="bg-grey pos-rel video_active">
        <div class="container pb-100 pt-100">
          <h1 class="h1 text-uppercase mb-40">Маршруты</h1>
          <div class="card-flex-wrapper">
            <div class="card bg-grey-grad">
              <p class="route-number mt-0 mb-10">№1</p>
              <h3 class="text-uppercase">Киевский — Сердце столицы</h3>
              <img class="card-img img-responsive cursor-pointer" data-route="kievsky" src="%PUBLIC_URL%/images/kievsky-route_active.svg" alt="kievsky route">
              <p>Первый регулярный речной маршрут Киевский — Сердце столицы улучшит транспортное обслуживание тех москвичей, которых река разделяет со станциями метро и МЦК</p>
            </div>
            <div class="card bg-grey-grad card-disabled">
              <p class="route-number mt-0 mb-10">№2</p>
              <h3 class="text-uppercase cursor-pointer">Автозаводский Мост — Печатники</h3>
              <img class="card-img img-responsive d-block d-none-mob cursor-pointer img-disabled" data-route="avtozavodsky" src="%PUBLIC_URL%/images/avtozavodsky-route_disabled.svg" alt="kievsky route">
              <img class="card-img img-responsive d-none d-block-mob cursor-pointer img-disabled" data-route="avtozavodsky" src="%PUBLIC_URL%/images/avtozavodsky-route_vert_disabled.svg" alt="kievsky route">
              <p>Раньше через Южный речной вокзал и прилегающие районы проходило несколько маршрутов речного транспорта, которые были популярны у москвичей. Открытие нового маршрута состоится до конца года.</p>
            </div>
          </div>
        </div>

        <div id="fullimage" class="fullimage fullimage-disabled">
          <div class="fullimage-wrapper"></div>
        </div>
      </section>

      <!-- Секция с одним маршрутом -->
<!--      <section id="pier-routes" class="bg-grey pos-rel pt-100">-->
<!--        <div class="container pb-100">-->
<!--          <h1 class="h1 text-uppercase mb-40">Маршруты</h1>-->

<!--          &lt;!&ndash; desktop, horizTab &ndash;&gt;-->
<!--          <div class="card-flex-wrapper d-none-tab">-->
<!--            <div class="card bg-grey-grad">-->
<!--              <div class="grid-12 width-1 align-center">-->
<!--                <div class="col-6 d-flex-col max-width-400">-->
<!--                  <p class="route-number mt-0 mb-10">№1</p>-->
<!--                  <h2 class="text-uppercase fs-125-tab">Киевский — Сердце столицы</h2>-->
<!--                  <p class="flex-11auto mt-30">Первый регулярный речной маршрут Киевский — Сердце столицы улучшит транспортное обслуживание тех москвичей, которых река разделяет со станциями метро и МЦК</p>-->
<!--                  <a data-route="kievsky" href="#" class="btn btn-link align-self-fs">-->
<!--                    Посмотреть-->
<!--                    <img src="%PUBLIC_URL%/images/icons/arrow-right.svg" alt="arrow">-->
<!--                  </a>-->
<!--                </div>-->
<!--                <img class="col-6 card-img img-responsive cursor-pointer" data-route="kievsky" src="%PUBLIC_URL%/images/kievsky-route_active.svg" alt="kievsky route">-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->

<!--          &lt;!&ndash; vertTab, mobile &ndash;&gt;-->
<!--          <div class="card-flex-wrapper d-none d-flex-tab">-->
<!--            <div class="card bg-grey-grad">-->
<!--              <p class="route-number mt-0 mb-10">№1</p>-->
<!--              <h3 class="text-uppercase">Киевский — Сердце столицы</h3>-->
<!--              <img class="card-img img-responsive cursor-pointer" data-route="kievsky" src="%PUBLIC_URL%/images/kievsky-route_active.svg" alt="kievsky route">-->
<!--              <p>Первый регулярный речной маршрут Киевский — Сердце столицы улучшит транспортное обслуживание тех москвичей, которых река разделяет со станциями метро и МЦК</p>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->
<!--        &lt;!&ndash; Отображение маршрута по клику &ndash;&gt;-->
<!--        <div id="fullimage" class="fullimage fullimage-disabled">-->
<!--          <div class="fullimage-wrapper"></div>-->
<!--        </div>-->
<!--      </section>-->

      <section id="pier-faq" class="bg-grey video_active">
        <div class="container pb-100">
          <h1 class="h1 text-uppercase mb-40">Справочная информация</h1>
          <div class="card-flex-wrapper">
            <div class="card card-faq bg-grey-grad sepia-grey-grad">
              <h3 class="text-uppercase">Расписание</h3>
              <p class="fg-1">Электросуда работают ежедневно.<br>Расписание можно посмотреть на едином транспортном портале</p>
              <img class="card-img card-center-img img-responsive" src="%PUBLIC_URL%/images/calendar.png" alt="calendar">
              <a href="https://transport.mos.ru/reka/routes" class="btn btn-link align-self-fs" target="_blank">
                Посмотреть
                <img src="%PUBLIC_URL%/images/icons/arrow-right.svg" alt="arrow">
              </a>
            </div>
            <div class="card card-faq bg-grey-grad sepia-grey-grad cursor-pointer">
              <h3 class="text-uppercase">Стоимость проезда</h3>
              <div class="d-flex-col card-body-active">
                <p class="fg-1">Посмотрите подробную информацию о стоимости проезда</p>
                <img class="card-img card-center-img img-responsive" src="%PUBLIC_URL%/images/bill.png" alt="calendar">
                <a href="https://transport.mos.ru/reka/regular_river_routes" class="btn btn-link align-self-fs" target="_blank">
                  Посмотреть
                  <img src="%PUBLIC_URL%/images/icons/arrow-right.svg" alt="arrow">
                </a>
              </div>
              <div class="d-flex-col card-body-disabled justify-center">
                <div class="grid-12 mt-40 mb-40 mt-10-descsemi mb-10-descsemi">
                  <p class="col-8 mt-0 mb-10-descsemi col-6-descsemi">Рабочие дни</p>
                  <p class="col-4 text-right mt-0 mb-10-descsemi col-6-descsemi">150 рублей</p>
                  <p class="col-8 mt-0 mb-10-descsemi col-6-descsemi">Выходные и праздничные дни</p>
                  <p class="col-4 text-right mt-0 mb-10-descsemi col-6-descsemi">300 рублей</p>
                  <p class="col-8 mt-0 mb-10-descsemi col-6-descsemi">Дети до 7 лет</p>
                  <p class="col-4 text-right mt-0 mb-10-descsemi col-6-descsemi">Бесплатно</p>
                  <p class="col-8 mt-0 mb-0 col-6-descsemi">Провоз велосипеда</p>
                  <p class="col-4 text-right mt-0 mb-0 col-6-descsemi">Бесплатно</p>
                </div>
                <hr class="width-1 mt-0 mb-0">
                <p class="mt-10-descsemi mb-10-descsemi">С сентября стоимость поездки составит 150&nbsp;рублей в день</p>
                <p class="mt-0 mb-0">Речные маршруты включены в зону действия билетов «Единый» без лимита поездок на&nbsp;90 и&nbsp;365 дней</p>
              </div>
            </div>
            <div class="card card-faq bg-grey-grad sepia-grey-grad cursor-pointer">
              <h3 class="text-uppercase">Как оплачивать</h3>
              <div class="d-flex-col card-body-active">
                <p class="fg-1">Пассажиры могут оплачивать проезд привычным для них способом</p>
                <img class="card-img card-center-img img-responsive" src="%PUBLIC_URL%/images/card.png" alt="calendar">
                <a href="https://transport.mos.ru/reka/regular_river_routes" class="btn btn-link align-self-fs" target="_blank">
                  Посмотреть
                  <img src="%PUBLIC_URL%/images/icons/arrow-right.svg" alt="arrow">
                </a>
              </div>
              <div class="d-flex-col card-body-disabled justify-center">
                <p>Картой</p>
              </div>
            </div>
          </div>
        </div>
      </section>
      <footer id="footer" class="bg-dark-grey video_active">
        <div class="container pt-50 pb-50">
          <div class="grid-12 d-flex-tab d-flex-col-mob pt-30-mob px-30-mob">
            <div class="col-4 mb-40-mob">
              <div class="logos-flex-wrapper mb-30">
                <img src="%PUBLIC_URL%/images/icons/logo-river.svg" alt="river transport logo">
                <img src="%PUBLIC_URL%/images/icons/logo-IC.svg" alt="innovation center logo">
              </div>
              <a href="#" class="btn btn-link btn-link-footer align-self-fs sepia-grey">
                <img src="%PUBLIC_URL%/images/icons/boat.svg" alt="boat">
                О речном транспорте
              </a>
            </div>
            <div class="col-4 footer-links-wrapper">
              <p class="bold mt-0 fs-1125">Речной транспорт</p>
              <ul class="footer-list">
                <li class="footer-list-item"><a class="footer-link" href="#">Причал</a></li>
                <li class="footer-list-item"><a class="footer-link" href="#">Электросудно</a></li>
                <li class="footer-list-item"><a class="footer-link" href="#">Маршруты</a></li>
                <li class="footer-list-item"><a class="footer-link" href="#">Справка</a></li>
              </ul>
            </div>
            <div class="col-4 footer-contacts">
              <p class="bold mt-0 mb-30 fs-1125 fs-1-tab mb-20-mob">Контакт-центр<br>«Московский транспорт»</p>
              <a class="footer-link fs-15 fs-1125-tab" href="tel:+74955395454">+7 495 539-54-54</a>
              <a class="footer-link" href="tel:3210"><span class="fs-15 fs-1125-tab">3210</span> (с мобильного телефона)</a>
            </div>
          </div>
          <div class="footer-links-wrapper-tab mt-60 mt-50-mob">
            <a class="footer-link fs-0875-tab" href="#">Причал</a>
            <a class="footer-link fs-0875-tab" href="#">Электросудно</a>
            <a class="footer-link fs-0875-tab" href="#">Маршруты</a>
            <a class="footer-link fs-0875-tab" href="#">Справка</a>
          </div>
        </div>
      </footer>
    </div>
  </div>


<!--  Сцена с причалом -->

  <a-scene id="scenePier" renderer="antialias: true;
                     sortObjects: true;
                     maxCanvasWidth: 3000;
                     maxCanvasHeight: 3000;
                     precision: low;
                     toneMapping:  ‘ACESFilmic’;">
    <button id="aframe_rollupPier" class="dock_leave">Свернуть</button>
    <a-assets>
      <script id="flatShader" type="x-shader/x-fragment">
          varying vec2 vUv;
          void main() {
            gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
          }
        </script>
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
      <!-- Начало применения правок к коду -->
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->


      <!-- //////////////////// -->
      <!-- Изображения причала -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->


      <!-- 01 Вход в здание причала -->
      <img
              id="dockImage_01"
              src="https://coddmac.store/Prichal/building/building_01_enter.jpg"
              crossorigin="anonymous"
              importance="high"
      />

      <!-- 02 Выход напротив турникетов -->
      <img
              id="dockImage_02"
              src="https://coddmac.store/Prichal/building/building_02_exit.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 03 Точка перехода в туалет, на улицу или возврата внутри шайбы -->
      <img
              id="dockImage_03"
              src="https://coddmac.store/Prichal/building/building_03_prerestroom.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 04 туалет -->
      <img
              id="dockImage_04"
              src="https://coddmac.store/Prichal/building/building_05_restroom_2_cropped.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 05 Уличная панорама -->
      <img
              id="dockImage_05"
              src="https://coddmac.store/Prichal/building/building_06_panorama.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- //////////////////// -->
      <!-- Уличные снимки -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->


      <!-- 01 Выход напротив турникетов -->
      <img
              id="streetImage_01"
              src="https://coddmac.store/Prichal/street/street_01_preenterance.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 02 Вид на шайбу с причала -->
      <img
              id="streetImage_02"
              src="https://coddmac.store/Prichal/street/street_02.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 03 Другой угол причала -->
      <img
              id="streetImage_03"
              src="https://coddmac.store/Prichal/street/street_03.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 04 Вид с лестницы -->
      <img
              id="streetImage_04"
              src="https://coddmac.store/Prichal/street/street_04.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 05 Фотография у стеллы -->
      <img
              id="streetImage_05"
              src="https://coddmac.store/Prichal/street/street_05_fin.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- Стрелочка перехода между точками -->
      <img
              id="hotspot"
              src="https://coddmac.store/BKL/360/source/Hotspot_blue_big.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка синички -->
      <img
              id="boatTeleportSpot"
              src="https://coddmac.store/Prichal/Hotspot_Icon_boat_2.svg"
              crossorigin="anonymous"
      />


    </a-assets>
    <!-- Начинаем добавлять точки телепортации и переходы между ними -->
    <a-entity id="spots" hotspots="">

      <!-- //////////////////// -->
      <!-- Перемещения по улице -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->
      <!--ST01 самая дальняя точка. мы до неё можем дойти, но не стартуем с нее -->
      <a-entity id="group-room1" scale="0 0 0">
        <!-- спуститься по лестнице -->
        <a-image
                src="#hotspot"
                spot="linkto:#streetImage_04;spotgroup:group-room2;phiStart:4"
                position="-12 1 -2"
                rotation="180 90 -45"
                look-at
        ></a-image>
      </a-entity>

      <!--ST02 Обзор с лестницы -->
      <a-entity id="group-room2" scale="0 0 0">
        <!-- выход назад -->
        <a-image
                spot="linkto:#streetImage_05;spotgroup:group-room1;phiStart:0"
                src="#hotspot"
                position="0 3 8"
                rotation="180 0 -90"
                look-at
        ></a-image>
        <!-- пройти на причал -->
        <a-image
                spot="linkto:#streetImage_03;spotgroup:group-room3;phiStart:12"
                src="#hotspot"
                position="0 -1 -11"
                look-at
        ></a-image>
      </a-entity>

      <!--ST03 угол причала -->
      <a-entity id="group-room3" scale="0 0 0">
        <!-- выход назад -->
        <a-image
                spot="linkto:#streetImage_04;spotgroup:group-room2;phiStart:4"
                src="#hotspot"
                position="-0.5 1 8"
                look-at
        ></a-image>
        <!-- перейти в другой конец причала -->
        <a-image
                spot="linkto:#streetImage_02;spotgroup:group-room4;phiStart:-22"
                src="#hotspot"
                position="-8 1 -0.6"
                rotation="180 90 180"
                look-at
        ></a-image>
      </a-entity>

      <!--ST04 Второй угол причала напротив шайбы -->
      <a-entity id="group-room4" scale="0 0 0">
        <!-- выход назад -->
        <a-image
                spot="linkto:#streetImage_03;spotgroup:group-room3;phiStart:12"
                src="#hotspot"
                position="15 1 0.6"
                rotation="180 90 180"
                look-at
        ></a-image>
        <!-- подойти ближе к шайбе -->
        <a-image
                spot="linkto:#streetImage_01;spotgroup:group-room5;phiStart:-92"
                src="#hotspot"
                position="0 1 -8"
                look-at
        ></a-image>
      </a-entity>

      <!--ST05 стоим снаружи шайбы прямо у входа -->
      <a-entity id="group-room5" scale="0 0 0">
        <!-- выход назад -->
        <a-image
                spot="linkto:#streetImage_02;spotgroup:group-room4;phiStart:-22"
                src="#hotspot"
                position="-0.5 1 8"
                look-at
        ></a-image>
        <!-- войти в шайбу -->
        <a-image
                spot="linkto:#dockImage_01;spotgroup:group-room6;phiStart:95"
                src="#hotspot"
                position="0 1 -8"
                look-at
        ></a-image>
      </a-entity>

      <!-- //////////////////// -->
      <!-- Точки внутри шайбы -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->

      <!--B01 Вход в шайбу после турникетов (тут начинается экскурсия) -->
      <a-entity id="group-room6">
        <!-- выход назад -->
        <a-image
                spot="linkto:#streetImage_01;spotgroup:group-room5;phiStart:-92"
                src="#hotspot"
                position="-1 1 8"
                look-at
        ></a-image>
        <!-- к следующему турникету -->
        <!-- phiStart:-135 чтобы смотреть прямо в турникет -->
        <a-image
                spot="linkto:#dockImage_02;spotgroup:group-room7;phiStart:-135"
                src="#hotspot"
                position="8 1 -6"
                rotation="180 120 180"
                look-at
        ></a-image>
      </a-entity>

      <!--B02 Точка напротив турникетов. Возможность перейти на синичку -->
      <a-entity id="group-room7" scale="0 0 0">
        <!-- выход назад -->
        <a-image
                spot="linkto:#dockImage_01;spotgroup:group-room6;phiStart:95"
                src="#hotspot"
                position="0 1 8"
                look-at
        ></a-image>
        <!-- в предтуалетье -->
        <a-image
                spot="linkto:#dockImage_03;spotgroup:group-room8;phiStart:-143"
                src="#hotspot"
                position="-9 1 -3"
                rotation="180 90 180"
                look-at
        ></a-image>

        <!-- тут телепортируем на синичку пролистыванием сайта -->
        <a-entity position="6.3 1 -5" look-at rotation="180 120 180">
          <a-image id="TeleportPier" src="#boatTeleportSpot">
        </a-entity>
      </a-entity>
    </a-entity>

    <!--B03 точка напротив туалета -->
    <a-entity id="group-room8" scale="0 0 0">
      <!-- выход назад -->
      <a-image
              spot="linkto:#dockImage_02;spotgroup:group-room7;phiStart:-135"
              src="#hotspot"
              position="8 1 -3"
              rotation="180 110 180"
              look-at
      ></a-image>
      <!-- в туалет -->
      <a-image
              spot="linkto:#dockImage_04;spotgroup:group-room9;phiStart:-140"
              src="#hotspot"
              position="8.5 1 4.2"
              rotation="180 60 180"
              look-at
      ></a-image>
      <!-- к панораме -->
      <a-image
              spot="linkto:#dockImage_05;spotgroup:group-room10;phiStart:103"
              src="#hotspot"
              position="-6 1 -2.3"
              rotation="180 60 180"
              look-at
      ></a-image>
    </a-entity>

    <!--B04 туалет -->
    <a-entity id="group-room9" scale="0 0 0">
      <!-- выход назад -->
      <a-image
              spot="linkto:#dockImage_03;spotgroup:group-room8;phiStart:-143"
              src="#hotspot"
              position="-6 1 -2"
              rotation="180 80 180"
              look-at
      ></a-image>
    </a-entity>

    <!--B05 наружная панорама -->
    <a-entity id="group-room10" scale="0 0 0">
      <!-- выход назад -->
      <a-image
              spot="linkto:#dockImage_03;spotgroup:group-room8;phiStart:-143"
              src="#hotspot"
              position="5 1 2"
              rotation="180 70 180"
              look-at
      ></a-image>
    </a-entity>

    </a-entity>
    <!-- Камера в сцене -->
    <a-entity
            id="cam"
            camera="fov:80"
            position="0 1.6 0"
            look-controls
            cursor="rayOrigin: mouse"
            animation__zoomin="property:camera.fov;dur:2000;to:50;startEvents:zoomin;"
            animation__zoomout="property:camera.fov;dur:1000;to:80;startEvents:zoomout;"
    >
      <a-plane
              id="camfadeplane"
              rotation="10 0.5 0"
              position="0 0 -0.5"
              material="color:#000000;transparent:true;opacity:0"
              width="0"
              height="0"
              animation__fadein="property:material.opacity;to:1;dur:2000;startEvents:camFadeIn"
              animation__fadeout="property:material.opacity;to:0;dur:1000;startEvents:camFadeOut"
      ></a-plane>
    </a-entity>

    <!-- тут где написано phi-start подбираем точку начала первого кадра
(куда будет повёрнута камера при загрузке страницы) -->

    <a-sky id="skybox" src="#dockImage_01" rotation="0 0 0" phi-start="95"></a-sky>
  </a-scene>


  <!--  Сцена с Синичкой -->
  <a-scene id="sceneSinich" renderer="antialias: true;
                     sortObjects: true;
                     maxCanvasWidth: 3000;
                     maxCanvasHeight: 3000;
                     precision: low;
                     toneMapping:  ‘ACESFilmic’;">
    <button id="aframe_rollupSinich" class="dock_leave">Свернуть</button>
    <a-assets>
      <script id="flatShaderSinich" type="x-shader/x-fragment">
          varying vec2 vUv;
          void main() {
            gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
          }
        </script>
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
      <!-- Начало применения правок к коду -->
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->


      <!-- //////////////////// -->
      <!-- Изображения причала -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->


      <!-- 01 Выход причала -->
      <img
              id="dockImage_01"
              src="https://coddmac.store/Prichal/building/buiding_04_street_to_the_boat.jpg"
              crossorigin="anonymous"
              importance="high"
      />


      <!-- //////////////////// -->
      <!-- Снимки на лодке -->
      <!-- \\\\\\\\\\\\\\\\\\\\ -->


      <!-- 01 центральный зал синички -->
      <img
              id="boatImage_01"
              src="https://coddmac.store/Prichal/boat/boat_01_main.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 02 Кипятильник с водой -->
      <img
              id="boatImage_02"
              src="https://coddmac.store/Prichal/boat/boat_02_boiler.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 03 заднее окно Синички -->
      <img
              id="boatImage_03"
              src="https://coddmac.store/Prichal/boat/boat_03_rearwindow.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 04 Туалет -->
      <img
              id="boatImage_04"
              src="https://coddmac.store/Prichal/boat/boat_04_restroom_02.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- 05 Капитаношная -->
      <img
              id="boatImage_05"
              src="https://coddmac.store/Prichal/boat/boat_05_capitan.jpg"
              crossorigin="anonymous"
              importance="low"
      />

      <!-- тут различные картинки -->

      <!-- Стрелочка перехода между точками -->
      <img
              id="hotspotSinich"
              src="https://coddmac.store/BKL/360/source/Hotspot_blue_big.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка шайбы -->
      <img
              id="buildingTeleportSpot"
              src="https://coddmac.store/Prichal/Hotspot_Icon_base.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка туалета со стрелкой влево -->
      <img
              id="restroomArrowLeftTeleportSpot"
              src="https://coddmac.store/Prichal/Hotspot_Icon_restroom_arrow_left.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка туалета со стрелкой вправо -->
      <img
              id="restroomArrowRightTeleportSpot"
              src="https://coddmac.store/Prichal/Hotspot_Icon_restroom_arrow_right.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка для бойлера -->
      <img
              id="boilerIcon"
              src="https://coddmac.store/Prichal/Hotspot_Icon_boiler.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка велопарковка -->
      <img
              id="bikeParkingIcon"
              src="https://coddmac.store/Prichal/Hotspot_Icon_bike.svg"
              crossorigin="anonymous"
      />

      <!-- Иконка рубка капитана -->
      <img
              id="steeringWheelIcon"
              src="https://coddmac.store/Prichal/Hotspot_Icon_capitan.svg"
              crossorigin="anonymous"
      />

    </a-assets>

    <!-- Начинаем добавлять точки телепортации и переходы между ними -->
    <a-entity id="spotsSinich" hotspots="">


      <!--BT01 точка перед входом в синичку -->
      <a-entity id="group-room1" >
        <!-- зайти внутрь слева -->
        <a-image
                src="#hotspot"
                spot="linkto:#boatImage_01;spotgroup:group-room2;phiStart:-148"
                position="-4 1 -8"
                rotation="180 0 180"
                look-at
        ></a-image>
        <!-- зайти внутрь справа -->
        <a-image
                src="#hotspot"
                spot="linkto:#boatImage_01;spotgroup:group-room2;phiStart:-148"
                position="5 1 -8"
                rotation="180 0 180"
                look-at
        ></a-image>
        <!-- пробраться к капитану -->
        <a-image
                src="#steeringWheelIcon"
                spot="linkto:#boatImage_05;spotgroup:group-room6;phiStart:90"
                position="0.4 5 -8"
                rotation="180 0 180"
                look-at
        ></a-image>

        <!-- тут телепортируем блок про шайбу ? -->
        <a-entity id="TeleportSinich" position="0 1 8" look-at rotation="180 0 180">
          <a-image src="#buildingTeleportSpot"></a-entity>
      </a-entity>

    </a-entity>
    <!--BT02 Рассматриваем Синичку из самого центра -->
    <a-entity id="group-room2" scale="0 0 0">
      <!-- выход назад слева-->
      <a-image
              spot="linkto:#dockImage_01;spotgroup:group-room1;phiStart:-132"
              src="#hotspot"
              position="4.5 1 12"
              look-at
      ></a-image>
      <!-- выход назад справа-->
      <a-image
              spot="linkto:#dockImage_01;spotgroup:group-room1;phiStart:-132"
              src="#hotspot"
              position="-3.7 1 12"
              look-at
      ></a-image>
      <!-- пробраться к капитану -->
      <a-image
              src="#steeringWheelIcon"
              spot="linkto:#boatImage_05;spotgroup:group-room6;phiStart:90"
              position="0 4 12"
              look-at
      ></a-image>
      <!-- переход к бойлеру -->
      <a-image
              spot="linkto:#boatImage_02;spotgroup:group-room3;phiStart:103"
              src="#hotspot"
              position="-3.3 1 -12"
              look-at
      ></a-image>
      <!-- переход в туалет -->
      <a-image
              spot="linkto:#boatImage_04;spotgroup:group-room4;phiStart:90"
              src="#restroomArrowLeftTeleportSpot"
              position="3.5 1 -12"
              look-at
      ></a-image>
    </a-entity>
    <!--BT03 Точка у бойлера -->
    <a-entity id="group-room3" scale="0 0 0">
      <!-- назад в зал -->
      <a-image
              spot="linkto:#boatImage_01; spotgroup:group-room2;phiStart:-148"
              src="#hotspot"
              position="3 1 8"
              rotation="180 15 180"
              look-at
      ></a-image>
      <!-- к заднему окну -->
      <a-image
              spot="linkto:#boatImage_03; spotgroup:group-room5;phiStart:90"
              src="#hotspot"
              position="0 1 -8"
              rotation="180 0 180"
              look-at
      ></a-image>

      <!-- тут можем написать про кулер -->
      <!-- <a-entity position="5 1 0" look-at rotation="180 90 180">
          <a-image src="#boilerIcon"></a-entity>
      </a-entity> -->
    </a-entity>
    <!--BT04 Туалет -->
    <a-entity id="group-room4" scale="0 0 0">
      <!-- выход назад -->
      <a-image
              spot="linkto:#boatImage_01;spotgroup:group-room2;phiStart:-148"
              src="#hotspot"
              position="-0.5 1 6"
              rotation="180 0 180"
              look-at
      ></a-image>

    </a-entity>
    <!--BT05 задняя площадка -->
    <a-entity id="group-room5" scale="0 0 0">
      <!-- к бойлеру -->
      <a-image
              spot="linkto:#boatImage_02;spotgroup:group-room3;phiStart:103"
              src="#hotspot"
              position="-5 1 6"
              rotation="180 135 180"
              look-at
      ></a-image>
      <!-- в туалет -->
      <a-image
              spot="linkto:#boatImage_04;spotgroup:group-room4;phiStart:90"
              src="#restroomArrowRightTeleportSpot"
              position="5 1 6"
              rotation="180 15 180"
              look-at
      ></a-image>
    </a-entity>
    <!--BT06 капитаношная -->
    <a-entity id="group-room6" scale="0 0 0">
      <!-- пройти в салон -->
      <a-image
              spot="linkto:#boatImage_01;spotgroup:group-room2;phiStart:-148"
              src="#hotspot"
              position="0 1 -8"
              look-at
      ></a-image>
      <!-- выход на улицу-->
      <a-image
              spot="linkto:#dockImage_01;spotgroup:group-room1;phiStart:-132"
              src="#hotspot"
              position="0 1 6"
              look-at
      ></a-image>
    </a-entity>

    </a-entity>
    <!-- Камера в сцене -->
    <a-entity
            id="camSinich"
            camera="fov:80"
            position="0 1.6 0"
            look-controls
            cursor="rayOrigin: mouse"
            animation__zoomin="property:camera.fov;dur:2000;to:50;startEvents:zoomin;"
            animation__zoomout="property:camera.fov;dur:1000;to:80;startEvents:zoomout;"
    >
      <a-plane
              id="camfadeplaneSinich"
              rotation="10 0.5 0"
              position="0 0 -0.5"
              material="color:#000000;transparent:true;opacity:0"
              width="0"
              height="0"
              animation__fadein="property:material.opacity;to:1;dur:2000;startEvents:camFadeIn"
              animation__fadeout="property:material.opacity;to:0;dur:1000;startEvents:camFadeOut"
      ></a-plane>
    </a-entity>
    <!-- тут где написано phi-start подбираем точку начала первого кадра
(куда будет повёрнута камера при загрузке страницы) -->
    <a-sky id="skyboxSinich" src="#dockImage_01" rotation="0 0 0" phi-start="-132"></a-sky>
  </a-scene>



<!-- Библиотека GSAP для последующего воспроизведения видео по скроллу -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scroll/16.1.3/smooth-scroll.min.js"></script>-->
<!--  <script src="https://assets.codepen.io/16327/ScrollSmoother.min.js"></script>-->

<!-- Воспроизведения видео по скроллу-->
  <script>
    const initOneVideo = () => {

      // Определяем, является ли устройство мобильным
      const isMobile = window.innerWidth < 481;
      // console.log(isMobile);
      // console.log(window.innerWidth);

      // Для каждого элемента с классом "bg-video"
      document.querySelectorAll(".video-background").forEach((el, i) => {
        // Создаем элемент "source" и задаем атрибуты для видеофайла
        const source = document.createElement("source");
        source.setAttribute(
                "src",
                `/${i + 1}${isMobile ? "mobile" : "video"}.mp4`
        );
        source.setAttribute("type", "video/mp4");

        // Добавляем элемент "source" внутрь видеоэлемента
        el.appendChild(source);
      });
    };
    initOneVideo();

    let hellopreloader = document.getElementById("hellopreloader_preload");
    function fadeOutnojquery(el) {
      el.style.opacity = 1;
      let interhellopreloader = setInterval(function() {
        el.style.opacity = el.style.opacity - 0.05;

        if (el.style.opacity <= 0.05) {
          clearInterval(interhellopreloader);
          hellopreloader.style.display = "none";
        }
      }, 16);
    }
    window.onload = function() {
      setTimeout(function() {
        fadeOutnojquery(hellopreloader);
      }, 1000);
    };


    // При прокрутке колесом мыши, видео воспроизводится и моментально ставится на паузу.
    // Таким образом создается эффект регулирования переключения.
    // Получается, чем медленнее видео, тем создается более плавный эффект перемещения видео.

    /* Кодировка здесь очень важна, чтобы обеспечить покадровое перемещение. */
    // ffmpeg -i ~/Downloads/Toshiba\ video/original.mov -movflags faststart -vcodec libx264 -crf 23 -g 1 -pix_fmt yuv420p output.mp4
    // ffmpeg -i ~/Downloads/Toshiba\ video/original.mov -vf scale=960:-1 -movflags faststart -vcodec libx264 -crf 20 -g 1 -pix_fmt yuv420p output_960.mp4
    // Получение элементов

    const infoElem = document.querySelector(".info_block");
    const infoElemContent = {
      snow: {
        src: "%PUBLIC_URL%/images/icons/snow.svg",
        text: "Возможность использования",
        title: "Круглый год",
      },
      ejection: {
        src: "%PUBLIC_URL%/images/icons/ejection.svg",
        text: "Выброс вредных веществ",
        title: "0%",
      },
      capacity: {
        src: "%PUBLIC_URL%/images/icons/capacity.svg",
        text: "Вместимость",
        title: "50 комфортных мест",
      },
      moorings: {
        src: "%PUBLIC_URL%/images/icons/moorings.svg",
        text: "Колличество причалов",
        title: "23",
      }
    }

    const video = document.querySelector(".video_content .video-background");
    const src = video.currentSrc || video.src;
    const videoContent = document.querySelector(".video_content");
    const siteContent = document.querySelector(".site_content");
    const htmlSmooth = document.querySelector("html");
    const bodyOverflow = document.querySelector("body");
    const contentNone = document.querySelectorAll('.video_active, section#pier-routes, section#sinichka-section, footer#footer');
    const firstSection = document.querySelector('section#pier-description');
    const mouseLogo = document.querySelector('.video_content .mouse_prev');

    /* Проверка, что видео "активировано" на iOS */
    // В данном случае, когда происходит первое касание на странице (событие "touchstart"), видео воспроизводится и сразу же приостанавливается. Это используется для активации возможности воспроизведения видео на устройствах iOS.
    const once = (el, event, fn, opts) => {
      const onceFn = (e) => {
        el.removeEventListener(event, onceFn);
        fn(e);
      };
      el.addEventListener(event, onceFn, opts);
      return onceFn;
    };

    // console.log(once);

    // Воспроизведение и приостановка видео при первом касании на iOS
    once(document.documentElement, "touchstart", () => {
      video.play();
      video.pause();
    });

    /* Управление анимацией при скролле с использованием GSAP и ScrollTrigger */
    // Анимация начинается, когда элемент с id "container" появляется в видимой части окна и продолжается до тех пор, пока он не исчезнет из виду.
    // gsap.registerPlugin(ScrollTrigger, ScrollSmoother);
    gsap.registerPlugin(ScrollTrigger);
    // планая чувствительность скролла версткой или js.
    const tl = gsap.timeline({
      // defaults: { duration: 1 },
      scrollTrigger: {
        trigger: "#container",
        start: "top top",
        end: "bottom bottom",
        // scrub: 0, // Плавное скольжение
        scrub: true, // Плавное скольжение
        toggleActions: "play pause resume reset" // Управление анимацией при скролле
      },
    });

    // console.log(tl);


    // Запуск анимации при загрузке метаданных видео
    once(video, "loadedmetadata", () => {
      tl.fromTo(
              video,
              { currentTime: 0 },
              { currentTime: video.duration || 32}
      );
    });

    // ScrollSmoother.create({
    //   smooth: 1,               // how long (in seconds) it takes to "catch up" to the native scroll position
    //   effects: true,           // looks for data-speed and data-lag attributes on elements
    //   smoothTouch: 0.1,        // much shorter smoothing time on touch devices (default is NO smoothing on touch devices)
    // });

    // Прикрепление контейнера видео к экрану
    ScrollTrigger.create({
      trigger: "#container",
      smooth: true,
      pin: true,
      start: "top top",
      end: "bottom bottom",
      ignoreMobileResize: true,
    });

    ScrollTrigger.normalizeScroll({
      // allowNestedScroll: true,
      lockAxis: false,
      momentum: self => Math.min(3, self.velocityY / 1000), // динамическое управление длительностью импульса при прокрутке флика
      // momentum: 0,
      type: "touch,wheel,pointer", // now the page will be drag-scrollable on desktop because "pointer" is in the list
    })


    // console.log(ScrollTrigger.normalizeScroll());
    // const smooth = ScrollSmoother.create({
    //   smooth: 1,               // how long (in seconds) it takes to "catch up" to the native scroll position
    //   effects: true,           // looks for data-speed and data-lag attributes on elements
    //   smoothTouch: 0.1,        // much shorter smoothing time on touch devices (default is NO smoothing on touch devices)
    // });
    //
    // console.log(smooth);

    let currentActiveContent = null;
    video.addEventListener("timeupdate", function() {
      const currentTime = video.currentTime;
      let newActiveContent = null;
      // console.log(currentTime);

      if (currentTime >= 7 && currentTime < 12) {
        newActiveContent = infoElemContent.ejection;
      } else if (currentTime >= 13 && currentTime < 17) {
        newActiveContent = infoElemContent.snow;
      } else if (currentTime >= 18 && currentTime < 22) {
        newActiveContent = infoElemContent.capacity;
      } else if (currentTime >= 23 && currentTime < 26) {
        newActiveContent = infoElemContent.moorings;
      } else if (currentTime < 30.5) {
        videoContent.style.opacity = 1;
      } else if (currentTime >= 30.5 && currentTime < 31) {
        videoContent.style.opacity = 0.9;
      } else if (currentTime >= 31 && currentTime < 31.5) {
        videoContent.style.opacity = 0.6;
      } else if (currentTime >= 31.5 && currentTime < 32) {
        videoContent.style.opacity = 0.3;
      } else if (currentTime >= 32) {
        videoContent.style.opacity = 0;
      }

      if (newActiveContent !== currentActiveContent) {
        if (newActiveContent) {
          const { src, text, title } = newActiveContent;

          // Анимация ухода текущего контента
          if (currentActiveContent) {
            const card = infoElem.querySelector('.card');
            card.classList.remove('animateUp');
            card.classList.add('animateDown');
            setTimeout(() => {
              updateInfoElement(src, text, title);
              card.classList.remove('animateDown');
              setTimeout(() => {
                card.classList.add('animateUp');
              }, 50);
            }, 500);
          } else {
            // Первый контент (без анимации ухода)
            updateInfoElement(src, text, title);
            const card = infoElem.querySelector('.card');
            card.classList.add('animateUp');
          }
        } else {
          // Анимация ухода текущего контента при очистке
          if (currentActiveContent) {
            const card = infoElem.querySelector('.card');
            card.classList.remove('animateUp');
            card.classList.add('animateDown');
            setTimeout(() => {
              clearInfoElement();
              card.classList.remove('animateDown');
            }, 500);
          } else {
            clearInfoElement();
          }
        }
        currentActiveContent = newActiveContent;
      }
    });
    function updateInfoElement(src, text, title) {
      infoElem.style.display = "block";
      infoElem.innerHTML = `
      <div class="card">
        <div class="card_marker">
          <img class="card_marker-img" src="${src}" alt="snow">
        </div>
        <div class="card_descr">
          <p class="card_descr-text">${text}</p>
          <p class="card_descr-title">${title}</p>
        </div>
      </div>
    `;
    }
    function clearInfoElement() {
      infoElem.style.display = "none";
    }

    function onVideoEndListener() {
      video.removeEventListener("ended", onVideoEndListener);
      videoContent.style.display = "none";
      siteContent.style.display = "block";
      bodyOverflow.style.overflow = 'auto';
      firstSection.classList.remove('fixed');
      htmlSmooth.classList.remove('smooth');
      // Отрубаем их скролл потому что он ломает получение корректных индексов секций при скролле.
      ScrollTrigger.normalizeScroll(false);
      setTimeout(() => {
        WheelContentSmooth();
      }, 500);
      setTimeout(() => {
        contentNone.forEach((section) => {
          section.classList.remove('video_active');
        });
      }, 600);
    }
    const finishVideos = () => {
      bodyOverflow.style.overflow = 'hidden';
      mouseLogo.style.display = 'none';
      video.play();
      // Отрубаем их скролл потому что он позволяет скролить при воспроизведении.
      ScrollTrigger.normalizeScroll(false);
      video.addEventListener("ended", onVideoEndListener);
    };
    video.addEventListener("ended", onVideoEndListener);
    const leavePrev = document.querySelector(".video_content .leave_button");
    leavePrev.addEventListener("click", () => {
      finishVideos();
    });


    // Определение функции для анимированной прокрутки к указанной секции
    function scrollToSection(section) {
      const targetPosition = section.offsetTop; // Позиция верхней границы секции
      const currentPosition = window.scrollY; // Текущая позиция прокрутки
      const distance = targetPosition - currentPosition; // Расстояние до цели
      const startTime = performance.now(); // Время начала анимации
      const duration = 1000; // Длительность анимации в миллисекундах
      const video = section.querySelector('.section-video');

      if (video) {
        video.currentTime = 0;
        video.classList.add('section-video_active');
        video.play();

        const sectionVideoEndListenerOne = () => {
          video.classList.remove('section-video_active');
          video.removeEventListener("ended", sectionVideoEndListenerOne);
        };

        video.addEventListener("ended", sectionVideoEndListenerOne);
      }

      // Функция для анимации, использующая requestAnimationFrame
      function step(timestamp) {
        const currentTime = timestamp - startTime; // Прошедшее время
        const progress = Math.min(currentTime / duration, 1); // Прогресс анимации (0-1)
        const easing = easeInOutQuad(progress); // Функция для сглаживания анимации
        window.scrollTo(0, currentPosition + distance * easing); // Прокрутка

        // Продолжение анимации, если не достигнут конец анимации
        if (currentTime < duration) {
          requestAnimationFrame(step);
        }
      }
      // Запуск анимации
      requestAnimationFrame(step);
    }
    // Определение функции для сглаживания анимации прокрутки (функция easing)
    function easeInOutQuad(t) {
      return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
    }


    // Плавное переключение секций на весь экран при движении колеса мыши
    function WheelContentSmooth() {
      let sectionVideoEndListener = null;
      const sections = document.querySelectorAll('section');
      let currentSectionIndex = 0;
      let isScrolling = false;

      let aframeDot = document.querySelectorAll('#TeleportPier, #TeleportSinich');
      aframeDot.forEach((sphere) => {
        sphere.addEventListener("click", function () {
          currentSectionIndex = 1;
        });
      });

      // Функция для обработки события "wheel"
      function handleWheelEvent(event) {
        if (window.innerWidth >= 1200) {
          console.log('wheel');
          const siteContent = document.querySelector('.site_content');
          const isSiteContentVisible = window.getComputedStyle(siteContent).display === 'block';

          if (!isSiteContentVisible) {
            return; // Если стиль не соответствует, не выполняем код ниже
          }

          event.preventDefault();
          event.stopPropagation();

          if (sectionVideoEndListener) {
            return;
          }

          if (!isScrolling) {
            isScrolling = true;

            // Определение направления прокрутки
            const delta = Math.sign(event.deltaY);

            // Изменение индекса текущей секции в зависимости от направления
            if (delta > 0 && currentSectionIndex < sections.length - 1) {
              currentSectionIndex++;
            } else if (delta < 0 && currentSectionIndex > 0) {
              currentSectionIndex--;
            }

            const currentSection = sections[currentSectionIndex];

            console.log(currentSection);

            // Вызов функции для плавной анимированной прокрутки
            scrollToSection(currentSection);

            // Установка таймера для предотвращения множественных срабатываний
            setTimeout(() => {
              isScrolling = false;
            }, 1000); // Здесь задержка, чтобы избежать множественных срабатываний
          }
        }
        // else {
        //   console.log('else');
        //   const siteContent = document.querySelector('.site_content');
        //   const isSiteContentVisible = window.getComputedStyle(siteContent).display === 'block';
        //
        //   if (!isSiteContentVisible) {
        //     return; // Если стиль не соответствует, не выполняем код ниже
        //   }
        //
        //   event.preventDefault();
        //   event.stopPropagation();
        //
        //   if (sectionVideoEndListener) {
        //     return;
        //   }
        //
        //   // Создаем функцию для выполнения кода №1
        //   function executeCode() {
        //     // Ваш код №1 здесь
        //     console.log("Код №1 выполнен");
        //   }
        //
        //   // Создаем экземпляр Intersection Observer
        //   const observer = new IntersectionObserver((entries) => {
        //     entries.forEach((entry) => {
        //       if (entry.isIntersecting) {
        //         // Если секция стала видимой, выполняем код №1
        //         executeCode();
        //         // Ждем, пока секция скроется из видимости
        //         observer.unobserve(entry.target);
        //       }
        //     });
        //   });
        //
        //   // Находим секцию с классом .section-video
        //   const sectionVideo = document.querySelector('.section-video');
        //
        //   // Наблюдаем за секцией
        //   if (sectionVideo) {
        //     observer.observe(sectionVideo);
        //   }
        // }
      }

      // На устройствах меньше 1200px переходное видео показывается, если блок с vectary
      // попал в область видимости вьюпорта.
      function executeCode() {
        // Выполняется если видна секция с vectary
        scrollToSection(sectionVideo);
      }
      function handleIntersection(entries) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            executeCode();
          }
        });
      }
      // Создаем экземпляр Intersection Observer
      const observer = new IntersectionObserver(handleIntersection);
      // Находим секцию с классом .sinichka_fixed
      const sectionVideo = document.querySelector('.sinichka_fixed');
      if (window.innerWidth < 1200 && sectionVideo) {
        // Наблюдаем за секцией только если ширина окна меньше 481 пикселя и секция существует
        observer.observe(sectionVideo);
      }

      // Добавляем обработчик события "wheel"
      document.addEventListener('wheel', handleWheelEvent, { passive: false });
      // Добавляем обработчик события "touch"
      // document.addEventListener('touchstart', handleTouchEvent, { passive: false });
    }

    // Изменение размеров canvas для a-frame
    window.addEventListener("DOMContentLoaded", () => {
      const myCanvas = document.querySelector('.a-canvas');

      // Получаем текущие размеры области видимости браузера
      function resizeCanvasToDisplaySize(canvas) {
        const devicePixelRatio = window.devicePixelRatio || 1;

        // Устанавливаем размеры канваса в размеры области видимости умноженные на devicePixelRatio
        const width = canvas.clientWidth * devicePixelRatio;
        const height = canvas.clientHeight * devicePixelRatio;

        // Устанавливаем физические размеры канваса
        canvas.width = width;
        canvas.height = height;
      }

      // Обновляем размеры канваса
      function updateCanvas() {
        resizeCanvasToDisplaySize(myCanvas);
        requestAnimationFrame(updateCanvas);
      }
      updateCanvas();

      // Клик на кнопку ОСМОТРЕТЬ 360 и выход из сцена кнопкой СВЕРНУТЬ
      const tour_Pier_360 = document.querySelector('#pier-description a.vue_button');
      const rollup_Pier_360 = document.querySelector('#aframe_rollupPier');
      const tour_Sinich_360 = document.querySelector('#sinichka-section button.interior_button');
      const rollup_Sinich_360 = document.querySelector('#aframe_rollupSinich');
      const mainContent = document.querySelector('#main');
      const htmlAframe = document.querySelector('html.a-fullscreen');

      // tour_Pier_360.addEventListener('click', () => {
      //   // После клика на кнопку находим тег сцены канвас a-scene через id
      //   let aframeContent = document.querySelector('#scenePier');
      //   setTimeout(() => {
      //     // Обязательно через отложеннное время вызываем на сцене метод resize для обновления ее размеров под текущую область втдимости.
      //     // Данного метода НЕТ в оффициальной документации a-frame. (но работает по совету из GitHub)
      //     aframeContent.resize();
      //   }, 100);
      //   aframeContent.style.opacity = '1';
      //   aframeContent.style.pointerEvents = 'auto';
      //   mainContent.style.display = 'none';
      //   rollup_Pier_360.style.display = 'block';
      //   htmlAframe.classList.add('position');
      // });
      //
      // rollup_Pier_360.addEventListener('click', () => {
      //   let aframeContent = document.querySelector('#scenePier');
      //   aframeContent.style.opacity = '0';
      //   aframeContent.style.pointerEvents = 'none';
      //   mainContent.style.display = 'block';
      //   rollup_Pier_360.style.display = 'none';
      //   htmlAframe.classList.remove('position');
      // });
      //
      // tour_Sinich_360.addEventListener('click', () => {
      //   // После клика на кнопку находим тег сцены канвас a-scene через id
      //   let aframeContent = document.querySelector('#sceneSinich');
      //   setTimeout(() => {
      //     // Обязательно через отложеннное время вызываем на сцене метод resize для обновления ее размеров под текущую область втдимости.
      //     // Данного метода НЕТ в оффициальной документации a-frame. (но работает по совету из GitHub)
      //     aframeContent.resize();
      //   }, 100);
      //   aframeContent.style.opacity = '1';
      //   aframeContent.style.pointerEvents = 'auto';
      //   mainContent.style.display = 'none';
      //   rollup_Sinich_360.style.display = 'block';
      //   htmlAframe.classList.add('position');
      // });
      //
      // rollup_Sinich_360.addEventListener('click', () => {
      //   let aframeContent = document.querySelector('#sceneSinich');
      //   aframeContent.style.opacity = '0';
      //   aframeContent.style.pointerEvents = 'none';
      //   mainContent.style.display = 'block';
      //   rollup_Sinich_360.style.display = 'none';
      //   htmlAframe.classList.remove('position');
      // });


      function toggleScene(sceneId) {
        let aframeContent = document.querySelector(`#${sceneId}`);
        setTimeout(() => {
          aframeContent.resize();
        }, 100);
        aframeContent.style.opacity = '1';
        aframeContent.style.pointerEvents = 'auto';
        mainContent.style.display = 'none';
        htmlAframe.classList.add('position');
      }

      function closeScene(sceneId) {
        let aframeContent = document.querySelector(`#${sceneId}`);
        aframeContent.style.opacity = '0';
        aframeContent.style.pointerEvents = 'none';
        mainContent.style.display = 'block';
        htmlAframe.classList.remove('position');
      }

      tour_Pier_360.addEventListener('click', () => {
        toggleScene('scenePier');
        rollup_Pier_360.style.display = 'block';
      });

      rollup_Pier_360.addEventListener('click', () => {
        closeScene('scenePier');
        rollup_Pier_360.style.display = 'none';
      });

      tour_Sinich_360.addEventListener('click', () => {
        toggleScene('sceneSinich');
        rollup_Sinich_360.style.display = 'block';
      });

      rollup_Sinich_360.addEventListener('click', () => {
        closeScene('sceneSinich');
        rollup_Sinich_360.style.display = 'none';
      });

    });

    setTimeout(() => {
      // let currentInfoPanel = null;

      // Open the panel
      document
              .querySelectorAll('#TeleportPier, #TeleportSinich')
              .forEach(function (sphere) {
                sphere.addEventListener("click", function () {
                  // console.log("Info sphere clicked: " + this.id);

                  // const currentSphereIdNumber = this.id.replace("sphere", "");
                  //
                  // // Get the template for this info sphere
                  // const template = document.querySelector(
                  //         "#infoPanel" + currentSphereIdNumber
                  // );
                  //
                  // // Get the info panel entity
                  // const infoPanel = document.querySelector(
                  //         "#infoPanelContainer" + currentSphereIdNumber
                  // );
                  //
                  // console.log("Current info panel: ", infoPanel);

                  // Instantiate the new info panel from the template
                  // infoPanel.appendChild(document.importNode(template.content, true));

                  // const allInfoPanelContainerElements = document.querySelectorAll(
                  //         "[id^=infoPanelContainer]"
                  // );

                  let aframeContent = document.querySelector('#scenePier');
                  const rollup_Pier_360 = document.querySelector('#aframe_rollupPier');
                  const mainContent = document.querySelector('#main');
                  const htmlAframe = document.querySelector('html.a-fullscreen');
                  const sinichka = document.querySelector('#sinichka-section');
                  mainContent.style.display = 'block';
                  scrollToSection(sinichka);
                  aframeContent.style.opacity = '0';
                  aframeContent.style.pointerEvents = 'none';
                  htmlAframe.classList.remove('position');
                  rollup_Pier_360.style.display = 'none';

                  // document
                  //         .querySelectorAll('[src="#crossIcon"]')
                  //         .forEach(function (cross) {
                  //           cross.addEventListener("click", function () {
                  //             allInfoPanelContainerElements.forEach((container) => {
                  //               if (container.id === infoPanel.id) {
                  //                 container.innerHTML = "";
                  //                 document
                  //                         .querySelector("#sphere" + currentInfoPanel)
                  //                         .setAttribute("visible", true);
                  //               }
                  //             });
                  //           });
                  //         });
                  //
                  // allInfoPanelContainerElements.forEach((container) => {
                  //   if (container.id !== infoPanel.id) {
                  //     container.innerHTML = "";
                  //   }
                  //   this.setAttribute("visible", true);
                  // });
                  //
                  // // console.log("Current info panel insides: ", infoPanel.innerHTML);
                  //
                  // const idNumber = currentSphereIdNumber;
                  // if (currentInfoPanel) {
                  //   document
                  //           .querySelector("#sphere" + currentInfoPanel)
                  //           .setAttribute("visible", true);
                  // }
                  // // document.querySelector("#info" + idNumber).style.display = "block";
                  // this.setAttribute("visible", false);
                  // currentInfoPanel = idNumber;
                  // console.log("Current info panel id: " + currentInfoPanel);
                });
              });
    }, 1500);
  </script>
</body>
</html>